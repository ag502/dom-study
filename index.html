<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOM 이벤트</title>
</head>
<!--<body onclick="console.log('fire/trigger inline attribute event handler')">-->
<body>
<!--    <div>mouse over me</div>-->
    <div>click me</div>
    <script>
        /** DOM 이벤트 개요 **/
        // const divElement = document.querySelector("span")
        // divElement.onclick = function() {
        //     console.log('fire/trigger property event handler')
        // }
        //
        // divElement.addEventListener("click", function() {
        //     console.log('fire/trigger addEventListener')
        // })
        /** 이벤트 흐름 **/
        // // 이벤트를 버블링하는 것뿐만 아니라 캡처 이벤트도 발생하도록 addEventListener()의 boolean 매개변수로 true를 전달하고 있음에 유의
        // // 1. 캡처단계
        // window.addEventListener("click", function() {
        //     console.log("1")
        // }, true)
        // // 2. 캡처단계
        // document.addEventListener("click", function() {
        //     console.log("2")
        // }, true)
        // // 3. 캡처단계
        // document.documentElement.addEventListener("click", function() {
        //     console.log("3")
        // }, true)
        // // 4. 캡처단계
        // document.body.addEventListener("click", function() {
        //     console.log("4")
        // }, true)
        // // 5. 캡처 단계 도중 대상 단계 발생
        // document.querySelector("div").addEventListener("click", function() {
        //     console.log("5")
        // }, true)
        //
        // // 6. 버블링 단계 도중 대상 단계 발생
        // document.querySelector("div").addEventListener("click", function() {
        //     console.log("6")
        // })
        // // 7. 버블링
        // document.body.addEventListener("click", function() {
        //     console.log("7")
        // })
        // // 8. 버블링
        // document.documentElement.addEventListener("click", function() {
        //     console.log("8")
        // })
        // // 9. 버블링
        // document.addEventListener("click", function() {
        //     console.log("9")
        // })
        // // 10. 버블링
        // document.addEventListener("click", function() {
        //     console.log("10")
        // })
        /** element노드, window개체, document개체에 이벤트 수신기를 추가하기 **/
        // const divEvent = function() {
        //     console.log("moving over div")
        // }
        // document.querySelector("div").addEventListener("mousemove", divEvent)
        //
        // document.addEventListener("mouseover", function() {
        //     console.log("moving over document")
        // })
        //
        // window.addEventListener("mouseover", function() {
        //     console.log("moving over window")
        // })
        //
        // document.querySelector("div").removeEventListener("mousemove", divEvent)
        // document.removeEventListener("mousemove",  function() {
        //     console.log("moving over document")
        // })
        /** 이벤트 개체에서 이벤트 속성 얻기 **/
        // document.querySelector("div").addEventListener("click", function(event) {
        //     console.log(Object.keys(event))
        //     Array.from(Object.keys(event)).forEach((item) => {
        //         console.log(`${item} = ${event[item]}`)
        //     })
        // })
        /** addEventListener() 사용 시 this의 값 **/
        // document.body.addEventListener("click", function(event) {
        //     console.log(this)
        //     console.log(event.currentTarget)
        // })
        /** 이벤트가 호출된 노드나 개체가 아닌 이벤트의 대상 참조 **/
        // document.body.addEventListener("click", function(event) {
        //     console.log(event.target)
        // })
        /** stopPropagation()을 사용하여 이벤트 흐름을 중지시키기 **/
        // document.querySelector("div").addEventListener("click", function() {
        //     console.log('me too, but nothing from the event flow!')
        // })
        //
        // document.querySelector("div").addEventListener("click", function(event) {
        //     console.log("invoke all click events attached, but cancel capture and bubble event phases")
        //     event.stopPropagation()
        // })
        //
        // document.querySelector("div").addEventListener("click", function() {
        //     console.log('me too, but nothing from the event flow!')
        // })
        //
        // document.body.addEventListener("click", function() {
        //     console.log("What, denied from being invoked!")
        // })

        /** stopImmediatePropagation()을 사용하여 이벤트 흐름 중지시키기 **/
        document.querySelector("div").addEventListener("click", function() {
            console.log('me too, but nothing from the event flow!')
        })

        document.querySelector("div").addEventListener("click", function(event) {
            console.log("invoke all click events attached, but cancel capture and bubble event phases")
            event.stopImmediatePropagation()
        })

        // stopImmediatePropagation 이후의 모든 이벤트 취소
        document.querySelector("div").addEventListener("click", function() {
            console.log('me too, but nothing from the event flow!')
        })

        document.body.addEventListener("click", function() {
            console.log("What, denied from being invoked!")
        })
    </script>
</body>
</html>